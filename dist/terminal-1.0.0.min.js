(function(j){var f=f||function(f,b){function l(a){k.insertAdjacentHTML("beforeEnd",a);c.scrollIntoView()}if(f){var d={welcome:"",prompt:"",separator:"&gt;",theme:"interlaced"},b=b||d;b.welcome=b.welcome||d.welcome;b.prompt=b.prompt||d.prompt;b.separator=b.separator||d.separator;b.theme=b.theme||d.theme;var j=Array.prototype.slice.call(arguments,2),g=localStorage.history?JSON.parse(localStorage.history):[],h=g.length,p="",i=document.getElementById(f);i.classList.add("terminal");i.classList.add("terminal-"+
b.theme);i.insertAdjacentHTML("beforeEnd",['<div class="background"><div class="interlace"></div></div><div class="container"><output></output><table class="input-line">','<tr><td nowrap><div class="prompt">'+b.prompt+b.separator+'</div></td><td width="100%"><input class="cmdline" autofocus /></td></tr>',"</table></div>"].join(""));var d=i.querySelector(".container"),m=d.querySelector(".input-line"),c=d.querySelector(".input-line .cmdline"),k=d.querySelector("output"),q=d.querySelector(".prompt"),
o=document.querySelector(".background"),n=[];k.addEventListener("DOMSubtreeModified",function(){setTimeout(function(){c.scrollIntoView()},0)},!1);b.welcome&&l(b.welcome);window.addEventListener("click",function(){c.focus()},!1);k.addEventListener("click",function(a){a.stopPropagation()},!1);c.addEventListener("click",function(){this.value=this.value},!1);m.addEventListener("click",function(){c.focus()},!1);c.addEventListener("keyup",function(a){27==a.keyCode&&(this.value="",a.stopPropagation(),a.preventDefault());
if(g.length&&(38==a.keyCode||40==a.keyCode))g[h]?g[h]=this.value:p=this.value,38==a.keyCode?(h--,0>h&&(h=0)):40==a.keyCode&&(h++,h>g.length&&(h=g.length)),this.value=this.value=g[h]?g[h]:p},!1);c.addEventListener("keydown",function(a){if(13==a.keyCode){if(a=this.value)g[g.length]=a,localStorage.history=JSON.stringify(g),h=g.length;var b=this.parentNode.parentNode.parentNode.parentNode.cloneNode(!0);b.removeAttribute("id");b.classList.add("line");var c=b.querySelector("input.cmdline");c.autofocus=
!1;c.readOnly=!0;c.insertAdjacentHTML("beforebegin",c.value);c.parentNode.removeChild(c);k.appendChild(b);m.classList.add("hidden");this.value="";var d;if(a&&a.trim()){var f=[],e="";a.split(" ").join(" ").split("").forEach(function(a){" "==a?e.length&&('"'!=e[0]&&"'"!=e[0]?(f.push(e),e=""):e+=a):'"'==a||"'"==a?e.length&&e[0]==a?(f.push(e.slice(1)),e=""):e+=a:e+=a});f.push(e);d=f.filter(function(a){return a})}d=d||[];for(a=0;a<n.length;a++)b=n[a],"function"===typeof b&&b(d);a=d[0];d=d.splice(1);if(a){var b=
!1,i;for(i in j)if(c=j[i],c.execute&&(b=c.execute(a,d,l)),!1!==b)break;!1===b&&(b=a+": command not found");l(b)}m.classList.remove("hidden")}},!1);window.addEventListener("keyup",function(a){c.focus();a.stopPropagation();a.preventDefault()},!1);return{clear:function(){k.innerHTML="";c.value="";o.style.minHeight=""},setPrompt:function(a){q.innerHTML=a+b.separator},getPrompt:function(){return q.innerHTML.replace(RegExp(b.separator+"$"),"")},setTheme:function(a){i.classList.remove("terminal-"+b.theme);
b.theme=a;i.classList.add("terminal-"+b.theme)},getTheme:function(){return b.theme},output:l,processCommand:function(a){c.value=a;a=new Event("keydown");a.keyCode=13;c.dispatchEvent(a)},subscribe:function(a){n.push(a)}}}};if("undefined"!==typeof module&&module.exports)module.exports=f;else if("function"==typeof define&&define.amd)define(function(){return f});else{var o=j.Terminal;f.noConflict=function(){j.Terminal=o;return f};j.Terminal=f}})(this);
