(function(i){var e=e||function(e,b){function k(a){j.insertAdjacentHTML("beforeEnd",a);c.scrollIntoView()}if(e){var d={welcome:"",prompt:"",separator:"&gt;",theme:"interlaced"},b=b||d;b.welcome=b.welcome||d.welcome;b.prompt=b.prompt||d.prompt;b.separator=b.separator||d.separator;b.theme=b.theme||d.theme;var i=Array.prototype.slice.call(arguments,2),f=localStorage.history?JSON.parse(localStorage.history):[],g=f.length,o="",h=document.getElementById(e);h.classList.add("terminal");h.classList.add("terminal-"+
b.theme);h.insertAdjacentHTML("beforeEnd",['<div class="background"><div class="interlace"></div></div><div class="container"><output></output><table class="input-line">','<tr><td nowrap><div class="prompt">'+b.prompt+b.separator+'</div></td><td width="100%"><input class="cmdline" autofocus /></td></tr>',"</table></div>"].join(""));var d=h.querySelector(".container"),l=d.querySelector(".input-line"),c=d.querySelector(".input-line .cmdline"),j=d.querySelector("output"),p=d.querySelector(".prompt"),
n=document.querySelector(".background"),m=[];j.addEventListener("DOMSubtreeModified",function(){setTimeout(function(){c.scrollIntoView()},0)},!1);b.welcome&&k(b.welcome);window.addEventListener("click",function(){c.focus()},!1);j.addEventListener("click",function(a){a.stopPropagation()},!1);c.addEventListener("click",function(){this.value=this.value},!1);l.addEventListener("click",function(){c.focus()},!1);c.addEventListener("keyup",function(a){27==a.keyCode&&(this.value="",a.stopPropagation(),a.preventDefault());
if(f.length&&(38==a.keyCode||40==a.keyCode))f[g]?f[g]=this.value:o=this.value,38==a.keyCode?(g--,0>g&&(g=0)):40==a.keyCode&&(g++,g>f.length&&(g=f.length)),this.value=this.value=f[g]?f[g]:o},!1);c.addEventListener("keydown",function(a){if(13==a.keyCode){if(a=this.value)f[f.length]=a,localStorage.history=JSON.stringify(f),g=f.length;var b=this.parentNode.parentNode.parentNode.parentNode.cloneNode(!0);b.removeAttribute("id");b.classList.add("line");var c=b.querySelector("input.cmdline");c.autofocus=
!1;c.readOnly=!0;c.insertAdjacentHTML("beforebegin",c.value);c.parentNode.removeChild(c);j.appendChild(b);l.classList.add("hidden");this.value="";if(a&&a.trim())var d=a.split(" ").filter(function(a){return a}),e=d[0],d=d.splice(1);a=d||[];a.unshift(e);for(b=0;b<m.length;b++)c=m[b],"function"===typeof c&&c(a);if(e){var a=!1,h;for(h in i)if(b=i[h],b.execute&&(a=b.execute(e,d,k)),!1!==a)break;!1===a&&(a=e+": command not found");k(a)}l.classList.remove("hidden")}},!1);window.addEventListener("keyup",
function(a){c.focus();a.stopPropagation();a.preventDefault()},!1);return{clear:function(){j.innerHTML="";c.value="";n.style.minHeight=""},setPrompt:function(a){p.innerHTML=a+b.separator},getPrompt:function(){return p.innerHTML.replace(RegExp(b.separator+"$"),"")},setTheme:function(a){h.classList.remove("terminal-"+b.theme);b.theme=a;h.classList.add("terminal-"+b.theme)},getTheme:function(){return b.theme},output:k,processCommand:function(a){c.value=a;a=new Event("keydown");a.keyCode=13;c.dispatchEvent(a)},
subscribe:function(a){m.push(a)}}}};if("undefined"!==typeof module&&module.exports)module.exports=e;else if("function"==typeof define&&define.amd)define(function(){return e});else{var n=i.Terminal;e.noConflict=function(){i.Terminal=n;return e};i.Terminal=e}})(this);
