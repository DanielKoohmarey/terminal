(function(k){var g=g||function(g,b){function k(a,b){if(b in n)for(var f=a.length-1;0<=f;f--)if(a[f]==b){a.splice(f,1);break}a.push(b);n[b]=!0}function m(a){l.insertAdjacentHTML("beforeEnd",a);c.scrollIntoView()}if(g){var e={welcome:"",prompt:"",separator:"&gt;",theme:"interlaced"},b=b||e;b.welcome=b.welcome||e.welcome;b.prompt=b.prompt||e.prompt;b.separator=b.separator||e.separator;b.theme=b.theme||e.theme;var r=Array.prototype.slice.call(arguments,2),h=localStorage.history?JSON.parse(localStorage.history):
[],n=localStorage.historySet?JSON.parse(localStorage.historySet):[],i=h.length,s="",j=document.getElementById(g);j.classList.add("terminal");j.classList.add("terminal-"+b.theme);j.insertAdjacentHTML("beforeEnd",['<div class="background"><div class="interlace"></div></div><div class="container"><output></output><table class="input-line">','<tr><td nowrap><div class="prompt">'+b.prompt+b.separator+'</div></td><td width="100%"><input class="cmdline" autofocus /></td></tr>',"</table></div>"].join(""));
var e=j.querySelector(".container"),o=e.querySelector(".input-line"),c=e.querySelector(".input-line .cmdline"),l=e.querySelector("output"),t=e.querySelector(".prompt"),q=document.querySelector(".background"),p=[];l.addEventListener("DOMSubtreeModified",function(){setTimeout(function(){c.scrollIntoView()},0)},!1);b.welcome&&m(b.welcome);window.addEventListener("click",function(){c.focus()},!1);l.addEventListener("click",function(a){a.stopPropagation()},!1);c.addEventListener("click",function(){this.value=
this.value},!1);o.addEventListener("click",function(){c.focus()},!1);c.addEventListener("keyup",function(a){27==a.keyCode&&(this.value="",a.stopPropagation(),a.preventDefault());if(h.length&&(38==a.keyCode||40==a.keyCode))h[i]?h[i]=this.value:s=this.value,38==a.keyCode?(i--,0>i&&(i=0)):40==a.keyCode&&(i++,i>h.length&&(i=h.length)),this.value=this.value=h[i]?h[i]:s},!1);c.addEventListener("keydown",function(a){if(13==a.keyCode){if(a=this.value)k(h,a),localStorage.history=JSON.stringify(h),localStorage.historySet=
JSON.stringify(n),i=h.length;var b=this.parentNode.parentNode.parentNode.parentNode.cloneNode(!0);b.removeAttribute("id");b.classList.add("line");var f=b.querySelector("input.cmdline");f.autofocus=!1;f.readOnly=!0;f.insertAdjacentHTML("beforebegin",f.value);f.parentNode.removeChild(f);l.appendChild(b);o.classList.add("hidden");this.value="";var c;if(a&&a.trim()){var e=[],d="";a.split(" ").join(" ").split("").forEach(function(a){" "==a?d.length&&('"'!=d[0]&&"'"!=d[0]?(e.push(d),d=""):d+=a):'"'==a||
"'"==a?d.length&&d[0]==a?(e.push(d.slice(1)),d=""):d+=a:d+=a});e.push(d);c=e.filter(function(a){return a})}c=c||[];for(a=0;a<p.length;a++)b=p[a],"function"===typeof b&&b(c);a=c[0];c=c.splice(1);if(a){var b=!1,g;for(g in r)if(f=r[g],f.execute&&(b=f.execute(a,c,m)),!1!==b)break;!1===b&&(b=a+": command not found");m(b)}o.classList.remove("hidden")}},!1);window.addEventListener("keyup",function(a){c.focus();a.stopPropagation();a.preventDefault()},!1);return{clear:function(){l.innerHTML="";c.value="";
q.style.minHeight=""},setPrompt:function(a){t.innerHTML=a+b.separator},getPrompt:function(){return t.innerHTML.replace(RegExp(b.separator+"$"),"")},setTheme:function(a){j.classList.remove("terminal-"+b.theme);b.theme=a;j.classList.add("terminal-"+b.theme)},getTheme:function(){return b.theme},output:m,processCommand:function(a){c.value=a;a=new Event("keydown");a.keyCode=13;c.dispatchEvent(a)},subscribe:function(a){p.push(a)}}}};if("undefined"!==typeof module&&module.exports)module.exports=g;else if("function"==
typeof define&&define.amd)define(function(){return g});else{var q=k.Terminal;g.noConflict=function(){k.Terminal=q;return g};k.Terminal=g}})(this);
